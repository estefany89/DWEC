<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 2</title>
</head>
    <h1>Convertir palabra</h1>
<body>
    <!--cuadros texarea-->
    <textarea id="textonormal" rows="10" cols="50"></textarea>
    <br>
    <button onclick="convertir()"> Convertir </button>
    <br>
    <textarea id="textoconvertido" rows="10" cols="50"></textarea>

    <script>
        //agrego nuevo método llamado desorganiza a la clase String
        String.prototype.desorganiza = function () {
            var cadena = this; //guardo la palabra en la variable cadena
            if (cadena.length <= 2) {
                return cadena; // Si la palabra tiene 2 o menos caracteres, no se cambia
            }
            for (var i = 0; i < 100; i++) { // bucle que se repite 100 veces
                var pos1 = Math.floor(Math.random() * (cadena.length - 2)) + 1; //genera una posición aleatoria dentro de un rango *2 y 1 suma vg
                var pos2 = Math.floor(Math.random() * (cadena.length - 2)) + 1;
                if (pos1 != pos2) {
                    // quiero que pos1 sea menor que pos2...
                    if (pos1 > pos2) { // si la primera posición es mayor que la segunda, las intercambio
                        var aux = pos1;
                        pos1 = pos2;
                        pos2 = aux;
                    }
                    // ahora intercambio las letras
                    var parte1 = cadena.substring(0, pos1); // trozo de palabra desde el principio al primer caracter
                    var parte2 = cadena.substring(pos1 + 1, pos2); // trozo de palabra desde el primer caracter al segundo
                    var parte3 = cadena.substring(pos2 + 1); // trozo de palabra desde el segundo caracter al final
                    cadena = parte1 + cadena.charAt(pos2) + parte2 + cadena.charAt(pos1) + parte3; // concateno las partes
                }
            }
            return cadena; // devuelvo la palabra desorganizada
        };

        function convertir() {
            var textoNormal = document.getElementById("textonormal").value;  // cojo el texto del textarea
            var palabras = textoNormal.split(" "); // creo un array de palabras separando la cadena por espacios
            var textoConvertido = ""; //ahora voy concatenando palabras desorganizadas
            for (var i = 0; i < palabras.length; i++) { // recorre todos los elementos del array
                var palabrades = palabras[i].desorganiza();  //desorganizo la palabra
                // Si la palabra es muy corta, no la cambiamos (esto ya lo hace el método desorganiza)
                textoConvertido += palabrades + " "; //agrego la palabra desorganizada al texto
            }
            document.getElementById("textoconvertido").value = textoConvertido.trim(); // muestro el texto convertido
        }
    </script>
</body>

</html>
